version: 1

project:
  bytecode:
    roots:
      - build/classes
    outputsGlobs:
      include: ["**/*.class"]
      exclude: []
    jarGlobs:
      include: ["**/*.jar"]
      exclude: []
  scan:
    scope: PROJECT_ONLY
    followSymlinks: false
    maxClasses: null
    maxJarBytes: null
    maxClassBytes: null
  validation:
    unknownRule: ERROR

roles:
  app:
    priority: 10
    description: "Application code"
    match:
      packageRegex: "^com\\.acme\\..*$"

analysis:
  graphs:
    enabled: true
    granularity: PACKAGE
    includeExternalBuckets: true
  hotspots:
    enabled: true
    topN: 25
    includeExternal: true
  scoring:
    enabled: true
    model: V1
    godClass:
      enabled: true
      weights: null
      thresholds: null
    overall:
      enabled: true
      weights: null
      thresholds: null

rules:
  - type: origin
    name: forbiddenJarDependencies
    roles: null
    enabled: true
    severity: ERROR
    params:
      forbid:
        # "from" and "to" are regex strings. Engine decides what jar identifier string is used.
        - from: ".*my-app.*\\.jar$"
          to: ".*guava-.*\\.jar$"
        - from: ".*service-a.*\\.jar$"
          to: ".*service-b.*\\.jar$"

exceptions: []

baseline:
  mode: NONE
  path: ".shamash/baseline.json"

export:
  enabled: false
  outputDir: ".shamash/reports"
  formats: [JSON]
  overwrite: false
