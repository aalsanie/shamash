version: 1

project:
  bytecode:
    roots: ["."]
    outputsGlobs:
      include: ["**/build/classes/**", "**/out/production/**"]
      exclude: ["**/.gradle/**", "**/build/tmp/**"]
    jarGlobs:
      include: ["**/*.jar"]
      exclude: ["**/build/**"]
  scan:
    scope: PROJECT_ONLY
    followSymlinks: false
    maxClasses: null
    maxJarBytes: null
    maxClassBytes: null
  validation:
    unknownRule: WARN

roles:
  api:
    priority: 10
    description: "Public entrypoints"
    match:
      packageContainsSegment: "api"
  domain:
    priority: 50
    description: "Domain core"
    match:
      packageContainsSegment: "domain"
  persistence:
    priority: 90
    description: "DB/IO adapters"
    match:
      packageContainsSegment: "persistence"

analysis:
  graphs:
    enabled: true
    granularity: PACKAGE
    includeExternalBuckets: false
  hotspots:
    enabled: true
    topN: 25
    includeExternal: false
  scoring:
    enabled: true
    model: V1
    godClass:
      enabled: true
      weights: null
      thresholds: null
    overall:
      enabled: true
      weights: null
      thresholds: null

rules:
  - type: "arch"
    name: "allowedRoleDependencies"
    roles: null
    enabled: true
    severity: "ERROR"
    scope: null
    params:
      allow:
        api: ["domain"]
        persistence: ["domain"]

  # Optional: if both exist, forbidden wins at runtime.
  - type: "arch"
    name: "forbiddenRoleDependencies"
    roles: null
    enabled: true
    severity: "ERROR"
    scope: null
    params:
      forbid:
        api: ["persistence"]

exceptions: []

baseline:
  mode: NONE

export:
  enabled: false
