version: 1

project:
  bytecode:
    roots:
      - "."
    outputsGlobs:
      include:
        - "**/build/classes/kotlin/main/**"
        - "**/build/classes/java/main/**"
      exclude: []
    jarGlobs:
      include:
        - "**/*.jar"
      exclude:
        - "**/*-sources.jar"
        - "**/*-javadoc.jar"

  scan:
    scope: PROJECT_ONLY
    followSymlinks: false
    maxClasses: null
    maxJarBytes: null
    maxClassBytes: null

  validation:
    unknownRule: ERROR

roles:
  api:
    priority: 10
    description: "Public APIs"
    match:
      packageContainsSegment: "api"

  domain:
    priority: 20
    description: "Business/domain logic"
    match:
      packageContainsSegment: "domain"

  data:
    priority: 30
    description: "Persistence/infrastructure"
    match:
      packageContainsSegment: "data"

analysis:
  graphs:
    enabled: true
    granularity: PACKAGE
    includeExternalBuckets: false

  hotspots:
    enabled: true
    topN: 25
    includeExternal: false

  scoring:
    enabled: true
    model: V1
    godClass:
      enabled: true
      weights: null
      thresholds: null
    overall:
      enabled: true
      weights: null
      thresholds: null

rules:
  - type: arch
    name: forbiddenRoleDependencies
    roles: null
    enabled: true
    severity: ERROR
    scope: null
    params:
      direction: transitive
      forbidden:
        api:
          - domain
          - data
        domain:
          - data

exceptions: []

baseline:
  mode: NONE
  # path: ".shamash/baseline/asm.json" not required when baseline mode = none

export:
  enabled: false
  ## outputDir: ".shamash/reports/asm" not required when export enabled=false
  formats: [JSON]
  overwrite: false
