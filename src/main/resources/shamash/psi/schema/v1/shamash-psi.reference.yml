version: 1

project:
  validation:
    unknownRuleId: warn   # warn | error | ignore
  rootPackage:
    mode: auto
    value: ""
  sourceGlobs:
    include:
      - "src/main/java/**"
      - "src/main/kotlin/**"
    exclude:
      - "**/build/**"
      - "**/generated/**"
      - "**/.idea/**"

############################ Example roles ###########################
## Adjust or remove entirely if you do not use layered architecture ##
roles:
  controller:
    priority: 100
    match:
      anyOf:
        - annotation: "org.springframework.web.bind.annotation.RestController"
        - annotation: "org.springframework.stereotype.Controller"
        - packageRegex: ".*\\.controller\\..*"
        - classNameEndsWith: "Controller"

  service:
    priority: 80
    match:
      anyOf:
        - annotation: "org.springframework.stereotype.Service"
        - packageRegex: ".*\\.service\\..*"
        - classNameEndsWith: "Service"

  repository:
    priority: 60
    match:
      anyOf:
        - annotation: "org.springframework.stereotype.Repository"
        - packageRegex: ".*\\.(dao|repository)\\..*"
        - classNameEndsWithAny: ["Dao", "Repository"]

# Rules are examples: OFF by default.
rules:

  arch.forbiddenRoleDependencies:
    enabled: false
    severity: ERROR
    dependencyKinds:
      - methodCall
      - fieldType
      - parameterType
      - returnType
      - extends
      - implements
      - annotationType
    forbidden:
      - from: "controller"
        to: ["repository"]
        message: "Controller must not depend on repository"
      - from: "service"
        to: ["controller"]
        message: "Service must not depend on controller"

  metrics.maxMethodsByRole:
    enabled: false
    severity: WARNING
    limits:
      controller: 5
      service: 8
      repository: 10
    countKinds: [declaredMethods]

  controller.maxPublicEndpoints:
    enabled: false
    severity: WARNING
    role: "controller"
    maxPublicMethods: 1

  packages.rolePlacement:
    enabled: false
    severity: WARNING
    expected:
      controller: { packageRegex: ".*\\.controller(\\..*)?$" }
      service:    { packageRegex: ".*\\.service(\\..*)?$" }
      repository: { packageRegex: ".*\\.(dao|repository)(\\..*)?$" }

  packages.rootPackage:
    enabled: false
    severity: WARNING
    mode: explicit
    value: "com.myco"

  naming.bannedSuffixes:
    enabled: false
    severity: WARNING
    banned: ["Manager", "Helper", "Impl"]

  deadcode.unusedPrivateMembers:
    enabled: false
    severity: INFO
    check: { fields: true, methods: true, classes: false }
    ignoreIfAnnotatedWithPrefix:
      - "org.junit."
      - "org.springframework.web.bind.annotation."
      - "jakarta.persistence."
      - "com.fasterxml.jackson.annotation."
      - "lombok."

# Exceptions example
exceptions:
  - id: "ignore-generated"
    reason: "Generated sources are noisy and not team-owned"
    match:
      fileGlob: "**/generated/**"
    suppress: ["*"]
