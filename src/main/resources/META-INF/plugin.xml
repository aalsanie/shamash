<idea-plugin>
    <id>io.shamash</id>
    <name>Shamash</name>

    <vendor email="a.aalsanie@outlook.com">
        Ahmad
    </vendor>

    <description>
        <![CDATA[
        Shamash enforces clean architecture, explicit design, and structural integrity
        in Java codebases using PSI inspections, ASM and logging.
        ]]>
    </description>

    <depends>com.intellij.modules.java</depends>

    <extensions defaultExtensionNs="com.intellij">

        <notificationGroup id="Shamash" displayType="BALLOON" isLogByDefault="true"/>

        <toolWindow id="Shamash" anchor="right" icon="/icons/pluginIcon.svg"
                    factoryClass="io.shamash.asm.ui.AsmDashboardToolWindowFactory"/>

        <!-- Architecture / Dependency rules -->
        <applicationService
            serviceImplementation="io.shamash.psi.settings.ShamashSettings"/>


        <localInspection
                language="JAVA"
                shortName="ControllerDaoDependency"
                displayName="Controller must not depend on DAO"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.ControllerDaoDependencyInspection"/>

        <localInspection
                language="JAVA"
                shortName="ServiceControllerDependency"
                displayName="Service must not depend on Controller"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.ServiceControllerDependencyInspection"/>


        <!-- Controller rules -->

        <localInspection
                language="JAVA"
                shortName="ControllerPublicMethodCount"
                displayName="Controller must expose a single public endpoint"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.ControllerPublicMethodInspection"/>


        <!-- Layer & structure rules -->

        <localInspection
                language="JAVA"
                shortName="MethodCountByLayer"
                displayName="Layer method count limit"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.MethodCountInspection"/>

        <localInspection
                language="JAVA"
                shortName="PrivateMethodInForbiddenLayer"
                displayName="Private methods forbidden in core layers"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.PrivateMethodInspection"/>


        <!-- Utility & naming rules -->

        <localInspection
                language="JAVA"
                shortName="UtilityClassRules"
                displayName="Utility class structure rules"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.UtilityClassInspection"/>

        <localInspection
                language="JAVA"
                shortName="NamingConvention"
                displayName="Naming convention enforcement"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.NamingConventionInspection"/>


        <!-- Package & boundaries -->

        <localInspection
                language="JAVA"
                shortName="PackageRoot"
                displayName="Package root enforcement"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.PackageRootInspection"/>


        <!-- Dead code -->

        <localInspection
                language="JAVA"
                shortName="DeadCode"
                displayName="Unused class or method"
                groupName="Shamash Architecture"
                enabledByDefault="true"
                implementationClass="io.shamash.psi.introspections.DeadCodeInspection"/>

    </extensions>

    <actions>
        <action id="io.shamash.asm.actions.RunAsmScanAction"
                class="io.shamash.asm.actions.RunAsmScanAction"
                text="Shamash: Run ASM Scan"
                description="Scans module outputs and dependency jars to build a bytecode index for shamash."
                icon="/icons/pluginIcon.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>

        <action id="io.shamash.OpenDashboardAction"
                class="io.shamash.asm.actions.OpenDashboardAction"
                text="Shamash Dashboard"
                description="Open shamash dashboard"
                icon="/icons/pluginIcon.svg">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
